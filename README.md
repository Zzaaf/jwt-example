# Применение JWT в авторизации

## Необходимые пакеты и модули

- `bcrypt`: хэширование и сравнивание паролей
- `cookie-parser`: работа с куками на стороне сервера
- `dotenv`: работа с переменными окружения из файла .env
- `jsonwebtoken`: формирование JWT
- `crypto`: нативный модуль Node.js с методом randomUUID

## Алгоритм работы

1. Пользователь c помощью почты и пароля успешно проходит аутентификацию
2. Сервер определил в БД какая роль у пользователя
3. Сервер подписывает пользователю токен с указанной ролью или другими полями, передёт в виде http-only cookie
4. В момент последующих запросов клиента к ресурсу в HTTP заголовке передаётся кука с подписанным токеном 
5. Сервер валидирует токен и определяет права/роль пользователя, пропускает или блокирует запрос


- Идентификация refresh token через его уникальный ID
- Для БД требуется модель токена: tokenID, userID
- Формируем конфигурацию для JWT
